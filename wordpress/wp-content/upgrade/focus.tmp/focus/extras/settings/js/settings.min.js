
jQuery(function($){if(typeof $.fn.wpColorPicker!='undefined'){$('.color-field').wpColorPicker();}
else{$('.colorpicker-wrapper').each(function(){var $$=$(this);var picker=$.farbtastic($$.find('.farbtastic-container').hide());picker.linkTo(function(color){$$.find('input').val(color);$$.find('.color-indicator').css('background',color);});picker.setColor($$.find('input').val());$$.find('input').focus(function(){$$.find('.farbtastic-container').show()}).blur(function(){$$.find('.farbtastic-container').hide()});});}
$('a.media-upload-button').click(function(event){var $$=$(this);var $c=$(this).closest('td');var frame=$(this).data('frame');if(frame){frame.open();return false;}
frame=wp.media({title:$$.data('choose'),library:{type:'image'},button:{text:$$.data('update'),close:false}});$$.data('frame',frame);frame.on('select',function(){var attachment=frame.state().get('selection').first().attributes;$c.find('.current .title').html(attachment.title);$c.find('input[type=hidden]').val(attachment.id);if(typeof attachment.sizes!='undefined'){if(typeof attachment.sizes.thumbnail!='undefined')
$c.find('.current .thumbnail').attr('src',attachment.sizes.thumbnail.url).fadeIn();else
$c.find('.current .thumbnail').attr('src',attachment.sizes.full.url).fadeIn();}
else{$c.find('.current .thumbnail').attr('src',attachment.icon).fadeIn();}
frame.close();});frame.open();return false;});$('.media-field-wrapper').mouseenter(function(){if($(this).closest('td').find('input[type=hidden]').val()!='')$(this).find('.media-remove-button').fadeIn('fast');}).mouseleave(function(){$(this).find('.media-remove-button').fadeOut('fast');})
$('.media-field-wrapper .current').mouseenter(function(){var t=$(this).find('.title');if(t.html()!=''){t.fadeIn('fast');}}).mouseleave(function(){$(this).find('.title').clearQueue().fadeOut('fast');})
$('a.media-remove-button').click(function(){var $$=$(this).closest('td');$$.find('.current .title').html('');$$.find('input[type=hidden]').val('');$$.find('.current .thumbnail').fadeOut('fast');$(this).fadeOut('fast');});var $$=$('form[action="options.php"]');var tabs=$('<h2></h2>').attr('id','siteorigin-settings-tab-wrapper').addClass('nav-tab-wrapper').prependTo($$);$$.find('h3').each(function(i,el){var h=$(el).hide();var a=$('<a href="#"></a>').addClass('nav-tab').html(h.html()).appendTo(tabs);if(i==0)a.addClass('nav-tab-active');var table=h.next().hide();a.click(function(){$$.find('> table').hide();table.show();tabs.find('a').removeClass('nav-tab-active');a.addClass('nav-tab-active');$('#current-tab-field').val(i);setUserSetting('siteorigin_settings_tab',i);return false;});if(i==getUserSetting('siteorigin_settings_tab',0)||(i==0&&getUserSetting('siteorigin_settings_tab',0)>$$.find('h3').length))a.click();});$('.input-field-select').change(function(){var c=$(this).closest('td').find('input');c.val($(this).val());$(this).val('')});if(window.location.hash!=''){$(window.location.hash).each(function(){var $$=$(this);var tr=$$.closest('tr');var table=$$.closest('table');if(!table.hasClass('form-table'))return;$('#siteorigin-settings-tab-wrapper > a').eq($('table.form-table').index(table)).click();tr.addClass('highlight');setTimeout(function(){tr.find('input,select').focus();},250);})}
$('.so-settings-gallery-edit').on({click:function(){if(typeof wp==='undefined'||!wp.media||!wp.media.gallery)return false;event.preventDefault();var $$=$(this);var val=$$.siblings('input[type="text"]').val();if(val.indexOf('{demo')===0||val.indexOf('{default')===0)val='-';if(val==''&&$('#post_ID').val()==null)val='-';var frame=wp.media.gallery.edit('[gallery ids="'+val+'"]');frame.state('gallery-edit').on('update',function(selection){var ids=selection.models.map(function(e){return e.id});var val=$$.siblings('input[type="text"]').val(ids.join(','));});return false;}});setTimeout(function(){$('#setting-updated').slideUp();},5000);});