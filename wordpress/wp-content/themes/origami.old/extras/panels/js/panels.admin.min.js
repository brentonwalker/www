/*
 GPL 2.0 http://www.gnu.org/licenses/gpl-2.0.html
*/
jQuery(function(a){a(window).bind("resize",function(b){a(b.target).hasClass("ui-resizable")||a("#panels-container .grid-container").panelsResizeCells()});a("#panels-container").sortable({items:"> .grid-container",handle:".grid-handle",tolerance:"pointer",stop:function(){a(this).find(".cell").each(function(){a(this).find('input[name$="[grid]"]').val(a("#panels-container .grid-container").index(a(this).closest(".grid-container")))});a("#panels-container .panels-container").trigger("refreshcells")}});
var d={};d[panels.i10n.buttons.add]=function(){var b=Number(a("#grid-add-dialog").find("input").val());if(NaN==b)return alert("Invalid Number"),!1;b=Math.round(b);b=Math.max(1,b);b=Math.min(10,b);window.panels.createGrid(b).hide().slideDown();a("#grid-add-dialog").dialog("close")};a("#grid-add-dialog").show().dialog({dialogClass:"panels-admin-dialog",autoOpen:!1,modal:!0,title:a("#grid-add-dialog").attr("data-title"),open:function(){a(this).find("input").val(2).select()},buttons:d}).keypress(function(b){b.keyCode==
a.ui.keyCode.ENTER&&a(this).closest(".ui-dialog").find(".ui-button:eq(0)").click()});a("#so-panels-panels .handlediv").click(function(){setTimeout(function(){a(window).resize()},150)});a("#panels-dialog").show().dialog({dialogClass:"panels-admin-dialog",autoOpen:!1,resizable:!1,draggable:!1,modal:!0,title:a("#panels-dialog").attr("data-title"),minWidth:960,close:function(){a("#panels-container .panel.new-panel").hide().slideDown(1E3).removeClass("new-panel")}}).find(".panel-type").disableSelection();
a("#panels .panels-add").button({icons:{primary:"ui-icon-add"},text:!1}).click(function(){a("#panels-text-filter-input").val("").keyup();a("#panels-dialog").dialog("open");return!1});a("#panels .grid-add").button({icons:{primary:"ui-icon-columns"},text:!1}).click(function(){a("#grid-add-dialog").dialog("open");return!1});a("#panels-text-filter-input").keyup(function(b){if(13==b.keyCode)b=a("#panels-dialog .panel-type-list .panel-type:visible"),1==b.length&&b.click();else{var c=a(this).val();a("#panels-dialog .panel-type-list .panel-type").show().each(function(){""!=
c&&-1==a(this).find("h3").html().toLowerCase().indexOf(c)&&a(this).hide()})}}).click(function(){a(this).keyup()});a("#panels-dialog .panel-type").click(function(){var b=a("#panels-dialog").panelsCreatePanel(a(this).attr("data-class"));panels.addPanel(b,null,null,!0);a("#panels-dialog").dialog("close")});"undefined"!=typeof panelsData?panels.loadPanels(panelsData):panels.createGrid(1);a(window).resize(function(){a(".panels-admin-dialog").filter(":data(dialog)").dialog("option","position","center")});
a("#wp-content-editor-tools").find(".wp-switch-editor").click(function(){a(this);a("#wp-content-editor-container, #post-status-info").show();a("#so-panels-panels").hide();a("#wp-content-wrap").removeClass("panels-active");a("#content-resize-handle").show()}).end().prepend(a('<a id="content-panels" class="hide-if-no-js wp-switch-editor switch-panels">'+a("#so-panels-panels h3.hndle span").html()+"</a>").click(function(){a(this);a("#wp-content-wrap").removeClass("tmce-active html-active");a("#wp-content-editor-container, #post-status-info").hide();
a("#so-panels-panels").show();a("#wp-content-wrap").addClass("panels-active");a(window).resize();a("#content-resize-handle").hide();return!1}));a("#wp-content-editor-tools .wp-switch-editor").click(function(){var b=a(this).attr("id").split("-");a("#wp-content-wrap").addClass(b[1]+"-active")});a("#panels-home-page #post-body").show();a("#panels-home-page #post-body-wrapper").css("background","none");a("#so-panels-panels").insertAfter("#wp-content-editor-container").addClass("wp-editor-container").hide().find(".handlediv").remove().end().find(".hndle").html("").append(a("#add-to-panels"));
a("#content-panels").click(function(){a(window).resize()});("undefined"!=typeof panelsData||a("#panels-home-page").length)&&a("#content-panels").click();setTimeout(function(){("undefined"!=typeof panelsData||a("#panels-home-page").length)&&a("#content-panels").click();a("#so-panels-panels .hndle").unbind("click");a("#so-panels-panels .cell").eq(0).click()},150);a("#panels-home-page").length&&(a("#content-tmce, #content-html").remove(),a("#content-panels").hide(),a("#panels-toggle-switch").mouseenter(function(){a(this).addClass("subtle-move")}).click(function(){a(this).toggleClass("state-off").toggleClass("state-on").removeClass("subtle-move");
a("#panels-home-enabled").val(a(this).hasClass("state-off")?"false":"true")}).add("#panels-toggle-switch *").disableSelection(),a("#post-preview").click(function(b){if(a("#wp-content-wrap").hasClass("panels-active")){var c=a("#panels-container").closest("form"),d=c.attr("action");c.attr("action",panels.previewUrl).attr("target","_blank").submit().attr("action",d).attr("target","_self");b.preventDefault()}}))});